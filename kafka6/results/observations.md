# Результаты лабораторной работы 6.3

## Информация о студенте
- ФИО: _____________________
- Дата выполнения: _____________________

## Шаг 1: Запуск кластера

### Наблюдения
- Время запуска кластера: _______ секунд
- Все 3 брокера запущены: ☐ Да ☐ Нет
- ZooKeeper доступен: ☐ Да ☐ Нет

### Скриншоты/Логи
```
# Вставьте вывод docker-compose ps


```

---

## Шаг 2: Создание топика

### Параметры топика
- Партиции: _____
- Replication Factor: _____
- min.insync.replicas: _____

### Вопросы
1. Почему min.insync.replicas=2, а не 3?
   
   **Ответ:**


2. Что произойдет, если установить min.insync.replicas=3?
   
   **Ответ:**


---

## Шаг 3: Проверка ISR

### Начальное состояние ISR

| Партиция | Лидер | Реплики | ISR |
|----------|-------|---------|-----|
| 0        |       |         |     |
| 1        |       |         |     |
| 2        |       |         |     |

### Вопросы
1. Все ли реплики находятся в ISR?
   
   **Ответ:**


2. Как распределены лидеры между брокерами?
   
   **Ответ:**


---

## Шаг 4: Отправка сообщений

### Результаты с acks=all
- Отправлено сообщений: _____
- Средняя latency: _____ ms
- Ошибки: ☐ Да ☐ Нет

### Логи продюсера
```
# Вставьте интересные фрагменты логов


```

---

## Эксперимент 1: Failover при сбое брокера

### Сценарий
- Остановлен брокер: kafka_____
- Время failover: _____ секунд

### ISR после сбоя

| Партиция | Лидер (до) | Лидер (после) | ISR (до) | ISR (после) |
|----------|------------|---------------|----------|-------------|
| 0        |            |               |          |             |
| 1        |            |               |          |             |
| 2        |            |               |          |             |

### Вопросы
1. Произошло ли переизбрание лидера?
   
   **Ответ:**


2. Можно ли отправлять сообщения с 2 брокерами?
   
   **Ответ:**


3. Как быстро произошел failover?
   
   **Ответ:**


---

## Эксперимент 2: min.insync.replicas

### Сценарий
- Остановлены брокеры: kafka_____ и kafka_____
- min.insync.replicas: _____

### Результат отправки с acks=all
- ☐ Успешно
- ☐ Ошибка: NotEnoughReplicasException
- ☐ Другое: _____________________

### Вопросы
1. Почему произошла ошибка?
   
   **Ответ:**


2. Как это защищает от потери данных?
   
   **Ответ:**


3. Как это влияет на доступность?
   
   **Ответ:**


---

## Эксперимент 3: Сравнение производительности

### Результаты бенчмарка

| acks | Средняя latency (ms) | Примечания |
|------|---------------------|------------|
| 0    |                     |            |
| 1    |                     |            |
| all  |                     |            |

### Вопросы
1. Почему acks=all медленнее?
   
   **Ответ:**


2. Когда использовать acks=0?
   
   **Ответ:**


3. Что такое "at-least-once" vs "at-most-once"?
   
   **Ответ:**


---

## Дополнительные исследования

### Что вы узнали нового?


### Проблемы, с которыми столкнулись?


### Идеи для дальнейших экспериментов?


---

## Выводы

### Ключевые концепции
- [ ] Понял(а) роль ISR в репликации
- [ ] Понял(а) механизм автоматического failover
- [ ] Понял(а) trade-off между надежностью и производительностью
- [ ] Понял(а) влияние min.insync.replicas на доступность

### Итоговая оценка (самооценка)
- Понимание концепций: ___/10
- Практические навыки: ___/10
- Готовность к production: ___/10

---

**Подпись:** _____________________
**Дата:** _____________________
